(this["webpackJsonpwebim-test-login"]=this["webpackJsonpwebim-test-login"]||[]).push([[0],{6:function(e,t,a){e.exports={content:"Login_content__OEYzy",tableTd:"Login_tableTd__3ArPj",errorText:"Login_errorText__16nm1",tableTdId:"Login_tableTdId__35C5r",tableWrapper:"Login_tableWrapper__2Ris7",table:"Login_table__2810l",tableRow:"Login_tableRow__3mU09",tableRowTitle:"Login_tableRowTitle__9R7b2",valid:"Login_valid__1M_y3",noValid:"Login_noValid__3BVUz",filterWrapper:"Login_filterWrapper__3DhI6",form:"Login_form__1v13g",formWrapper:"Login_formWrapper__Blp6g",headerWrapper:"Login_headerWrapper__341-J",header:"Login_header__13aLg",signout:"Login_signout__3C6OV",dataWrapper:"Login_dataWrapper__3D5II",filterLabel:"Login_filterLabel__REho4"}},62:function(e,t,a){e.exports=a(91)},67:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),o=(a(67),a(30)),i=a(10),s=a(2),u=a(15),m=a.n(u),p=a(22),d=a(13),f=a(34),b=a.n(f),g={token:JSON.parse(localStorage.getItem("token")),isLogin:!1,signIn:function(e,t){var a=this;return Object(p.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.post("http://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{username:e,password:t});case 2:r=n.sent,a.token=r.data.token,localStorage.setItem("token",JSON.stringify(a.token)),a.isLogin=!0;case 6:case"end":return n.stop()}}),n)})))()},signOut:function(){this.isLogin=!1,this.token=null}};var _=Object(n.createContext)();function h(e){var t=e.children,a=function(){var e=Object(n.useState)(g.token),t=Object(d.a)(e,2),a=t[0],r=t[1];return{token:a,signIn:function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.signIn(t,a);case 2:r(g.token);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.signOut();case 2:r(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}();return r.a.createElement(_.Provider,{value:a},t)}function v(){return Object(n.useContext)(_)}function E(e){var t=e.children,a=Object(s.a)(e,["children"]),n=v();return r.a.createElement(i.b,Object.assign({},a,{render:function(e){var a=e.location;return n.token?t:r.a.createElement(i.a,{to:{pathname:"/",state:{from:a}}})}}))}var O=a(6),w=a.n(O),k=a(121),j=a(122);function L(){var e=Object(i.g)(),t=Object(i.h)(),a=v(),c=(t.state||{from:{pathname:"/protected"}}).from,l=Object(n.useState)(null),o=Object(d.a)(l,2),s=o[0],u=o[1],f=Object(n.useState)(""),b=Object(d.a)(f,2),g=b[0],_=b[1],h=Object(n.useState)(null),E=Object(d.a)(h,2),O=E[0],L=E[1],N=Object(n.useState)(!1),x=Object(d.a)(N,2),T=x[0],y=x[1];function W(){return(W=Object(p.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,a.signIn(s,g);case 4:e.replace(c),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),L(t.t0.response.data.non_field_errors[0]),_("");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}Object(n.useEffect)((function(){if(null!==s){(s.length>=150||s.length<1)&&y(!0);var e=new RegExp("^[\\w.@+-]+$").test(s);y(!e)}}),[s]);return a.token?r.a.createElement(i.a,{to:"/protected"}):r.a.createElement("div",{className:w.a.formWrapper},r.a.createElement("form",{className:w.a.form},r.a.createElement(k.a,{error:T,id:"outlined-basic",label:"\u041b\u043e\u0433\u0438\u043d:",variant:"outlined",type:"text",onChange:function(e){u(e.target.value),L(null)},name:"username"}),r.a.createElement(k.a,{value:g,id:"outlined-basic",label:"\u041f\u0430\u0440\u043e\u043b\u044c:",variant:"outlined",type:"password",onChange:function(e){_(e.target.value),L(null)},name:"password"}),O&&r.a.createElement("span",{className:w.a.errorText},O),r.a.createElement(j.a,{disabled:T||!g.length||!s.length,onClick:function(e){return W.apply(this,arguments)},variant:"contained",color:"primary",to:"/protected"},"\u0412\u043e\u0439\u0442\u0438")))}function N(){var e=Object(i.g)(),t=v();return r.a.createElement(j.a,{onClick:function(){t.signOut((function(){return e.push("/")})),localStorage.clear()},variant:"contained",color:"primary",to:"/protected",className:w.a.signout},"\u0412\u044b\u0439\u0442\u0438")}var x=a(38),T=a.n(x);function y(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(d.a)(l,2),i=o[0],s=o[1],u=v(),f="Token ".concat(u.token);return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("http://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{headers:{Authorization:f}});case 2:t=e.sent,(a=t.data).sort((function(e,t){return e.id>t.id?1:e.id<t.id?-1:0})),c(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[f]),r.a.createElement("div",{className:w.a.dataWrapper},r.a.createElement("div",{className:w.a.headerWrapper},r.a.createElement("div",{className:w.a.header},r.a.createElement("div",{className:w.a.filterWrapper},r.a.createElement("label",{htmlFor:"filter",className:w.a.filterLabel},"\u0424\u0438\u043b\u044c\u0442\u0440"),r.a.createElement(k.a,{id:"standard-size-small",size:"small",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",variant:"outlined",type:"text",onChange:function(e){s(e.target.value)}})),r.a.createElement(N,null))),r.a.createElement("div",{className:w.a.tableWrapper},r.a.createElement("div",{className:w.a.table},r.a.createElement("div",{className:T()(w.a.tableRow,w.a.tableRowTitle)},r.a.createElement("p",{className:T()(w.a.tableTd,w.a.tableTdId)},"ID"),r.a.createElement("p",{className:w.a.tableTd},"username"),r.a.createElement("p",{className:w.a.tableTd},"last_name"),r.a.createElement("p",{className:w.a.tableTd},"first_name")),function(e){if(null!==e)return e.filter((function(e){return e.username.includes(i)})).map((function(e){return r.a.createElement("div",{className:w.a.tableRow,key:e.id},r.a.createElement("p",{className:T()(w.a.tableTd,w.a.tableTdId)},e.id),r.a.createElement("p",{className:w.a.tableTd},e.username),r.a.createElement("p",{className:w.a.tableTd},e.last_name),r.a.createElement("p",{className:w.a.tableTd},e.first_name))}))}(a))))}function W(){return r.a.createElement(h,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:w.a.content},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(L,null)),r.a.createElement(E,{path:"/protected"},r.a.createElement(y,null)),r.a.createElement(E,{path:"*"},r.a.createElement(i.a,{to:"/protected"}))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[62,1,2]]]);
//# sourceMappingURL=main.ff950155.chunk.js.map